<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DJ Neon Player</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: transparent !important;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: Arial, sans-serif;
    }
    .dj-player {
      background: transparent;
      padding: 15px;
      text-align: center;
    }
    .visualizer {
      height: 80px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      gap: 2px;
      margin: 15px 0;
    }
    .bar {
      width: 4px;
      background: linear-gradient(to top, #ff0055, #ff33aa);
      border-radius: 2px 2px 0 0;
      box-shadow: 0 0 6px rgba(255, 0, 85, 0.7);
      transition: height 0.05s ease;
    }
    .play-btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: transparent;
      border: 2px solid #ff0055;
      color: #ff0055;
      font-size: 20px;
      cursor: pointer;
      margin-top: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      outline: none;
      box-shadow: 0 0 12px rgba(255, 0, 85, 0.8);
      transition: all 0.2s ease;
      text-shadow: 0 0 8px #ff0055;
    }
    .play-btn:hover {
      box-shadow: 0 0 20px #ff0055;
      transform: scale(1.08);
    }
    .play-btn:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <div class="dj-player">
    <div class="visualizer" id="visualizer"></div>
    <button class="play-btn" id="playBtn">▶</button>
  </div>

  <audio id="audio" src="https://github.com/aeson70/djfan123.github.io/blob/main/%EF%BC%88%E7%A7%81%E8%B4%A7%EF%BC%89%E3%80%90%E5%88%98%E5%90%9B%E5%84%BF%E5%90%88%E5%94%B1%E3%80%91%E5%88%86%E9%A3%9E%E7%87%95(%20DJ%20Candy%20RMX)2%E7%89%88.mp3" preload="metadata"></audio>

  <script>
    const audio = document.getElementById('audio');
    const playBtn = document.getElementById('playBtn');
    const visualizer = document.getElementById('visualizer');

    const barCount = 64;
    for (let i = 0; i < barCount; i++) {
      const bar = document.createElement('div');
      bar.className = 'bar';
      bar.style.height = '2px';
      visualizer.appendChild(bar);
    }
    const bars = visualizer.querySelectorAll('.bar');

    let audioContext, analyser, dataArray;

    function initAudio() {
      if (audioContext) return;
      audioContext = new (window.AudioContext || window.webkitAudioContext)();
      analyser = audioContext.createAnalyser();
      const source = audioContext.createMediaElementSource(audio);
      source.connect(analyser);
      analyser.connect(audioContext.destination);
      analyser.fftSize = 256;
      dataArray = new Uint8Array(analyser.frequencyBinCount);
    }

    function togglePlay() {
      if (audio.paused) {
        if (!audioContext) initAudio();
        audio.play().then(() => {
          playBtn.textContent = '⏸';
          animate();
        }).catch(e => console.warn('播放失败:', e));
      } else {
        audio.pause();
        playBtn.textContent = '▶';
      }
    }

    function animate() {
      if (audio.paused) return;
      analyser.getByteFrequencyData(dataArray);
      const step = Math.floor(dataArray.length / barCount);
      for (let i = 0; i < barCount; i++) {
        const value = dataArray[i * step] || 0;
        const height = 2 + (value / 255) * 78;
        bars[i].style.height = height + 'px';
      }
      requestAnimationFrame(animate);
    }

    playBtn.addEventListener('click', togglePlay);
  </script>
</body>
</html>
